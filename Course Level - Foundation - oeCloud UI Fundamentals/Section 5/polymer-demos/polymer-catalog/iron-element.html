<!DOCTYPE html>
<html>

<head>

    <script src="../../bower_components/webcomponentsjs/webcomponents-lite.min.js"></script>
    <link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html" />
</head>

<body unresolved>
    <product-element></product-element>

    <dom-module id='product-element'>
        <template>
            <br/>
            <h1>Product Details</h1>
            <template is="dom-repeat" items="{{products}}">
                <br/>
                <b>ID : {{item.id}}</b>
                <br/>
                <b>Code : {{item.code}}</b>
                <br/>
                <b>Name: {{item.name}}</b>
                <br/>
            </template>

            <iron-ajax auto url="http://localhost:3000/api/products" handle-as="json" on-response="handleResponse" last-response="{{products}}">
            </iron-ajax>

        </template>
    </dom-module>

    <script>
            HTMLImports.whenReady(function () {
                Polymer({
                    is: 'product-element',
                    properties: {
                        products: {
                            type: Object
                        }
                    },
                    handleResponse: function (e, request) {
                        console.log(e.detail.response);
    
                    }
                })
            })
        </script>

</body>

</html>